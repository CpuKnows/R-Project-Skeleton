##############################################################################################
# File: main.R
# Author: FILL NAME HERE
# Date: FILL DATE HERE
# TLDR: main file
##############################################################################################

##############################################################################################
# Import libraries
##############################################################################################
library(plyr)
library(dplyr)
library(tidyr)
library(lubridate)
library(stringr)
library(reshape2)
library(futile.logger)
# library(Rcpp)
# library(RPostgreSQL)
# library(mailR)
# library(RCurl)
# library(knitr)

##############################################################################################
# Set working directory
##############################################################################################
setwd('WORKING DIRECTORY HERE')

##############################################################################################
# Set gloabal values
##############################################################################################
# System controls
TODAY_DATE = today()
LOGGING_ENABLED = TRUE
SQL_DB_ENABLED = TRUE
FTP_ENABLED = TRUE
EMAIL_ENABLED = TRUE

# Global Variables


##############################################################################################
# Setup Logging
##############################################################################################
flog.appender(appender.file(paste('logs/', TODAY_DATE, ' out.log', sep='')))

##############################################################################################
# Accounts
##############################################################################################
source('src/accounts.R')

##############################################################################################
# Imports functions
##############################################################################################
source('src/helper.R')

##############################################################################################
# Load Files
##############################################################################################
# Load files
df = read.csv('data/working/input/example.csv', stringsAsFactors = FALSE) %>%
  mutate(Date = as.Date(Date, '%m/%d/%Y'),
         company = standardize_company(company),
         phone = standardize_phone(phone))


##############################################################################################
# FTP
##############################################################################################
source('src/example_ftp.R')

##############################################################################################
# Generate Reports
##############################################################################################
source('src/example_report_generation.R')

##############################################################################################
# Email
##############################################################################################
source('src/example_report_email.R')
